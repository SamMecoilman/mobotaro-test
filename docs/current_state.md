# CURRENT STATE（いまの作業位置）

- ブランチ：reboot
- フェーズ：土台構築（完了）→ 入力統一（完了）
- 到達点：
  - TypeScript + Phaser（client）起動（Vite）
  - TypeScript + Colyseus（server）起動（Fastify + ws-transport）
  - client ↔ server 接続
  - サーバtick稼働（15/s）
  - 敵スポーン（仮：1.5s間隔）
  - MoveInput（x,y:-1..1）へ入力を統一（WASD/矢印 + 仮想スティック）
  - 仮想スティックUI実装（左下）
  - カメラ追従（主人公中心）＋背景スクロール＋UI固定を維持
  - 背景画像を map/school.png に差し替え、カメラ境界を画像サイズに合わせた
  - サーバ側でプレイヤー位置のクランプ範囲を画像サイズに合わせ、マップ端まで移動可能に調整（サーバ権威・最小変更）
- ローカル起動：
  - npm install
  - npm run dev
  - http://localhost:5173
  - （任意）http://localhost:2567/health
- 既知の課題：
  - 背景画像サイズ変更時、クランプ範囲・カメラ境界・描画の整合確認が必要
  - 端末判定（スマホ / タブレット / PC）がUA依存の場合、iPadOS等でブレる可能性
- 次の目標（直近）：
  - 仮想スティック（左下・移動のみの最小UI）を「PCでは非表示、スマホ/タブレットでは表示」で安定させる
  - PCではWASDで確実に移動できる状態を維持（回帰防止）
  - カメラ追従とサーバ側クランプが常に一致することを確認・固定
- 次の目標（中期）：
  - state同期を描画に統一（player/enemyをstate駆動）
  - Survivor戦闘の最小ループ
  - LvUP→強化選択→効果適用（最小実装）
